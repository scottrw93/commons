type: procfile
includeConfigs:
- BlazarV2QaSettings

procfile:
  # Cleans archived repos
  cleanMetadataCommand:
    type: SCHEDULED_JOB
    cmd: java-wrapper $EXTRA_ARGS -cp ./target/\* com.hubspot.blazar.BlazarService clean_repo_metadata
    schedule: "0 2 * * *"
    override:
      qa:
        allowSpotInstances: true
  # Deletes old queue items
  eventQueueCleanCommand:
    type: SCHEDULED_JOB
    cmd: java-wrapper $EXTRA_ARGS -cp ./target/\* com.hubspot.blazar.BlazarService event_queue_clean
    schedule: "0 0 * * *"
    override:
      qa:
        allowSpotInstances: true

  # Cleans up old branch metadata
  inactiveBranchMetadataCleanCommand:
    type: ON_DEMAND
    cmd: java-wrapper $EXTRA_ARGS -cp ./target/\* com.hubspot.blazar.BlazarService inactive_branch_metadata_clean

servers:
  qa:
  - mesos
  prod: []
