type: procfile

artifactBuildMetadata:
  repository: Orion
  module: OrionService
  branch: qa-deploys

buildResolution:
  qa: "LATEST_BUILD"
  prod: "NO_BUILD"

slack:
- channelName: "#paas-build-deploy-notifications"
  all:
    preDeploy: MUTE
    success: NOTIFY
    failure: NOTIFY
    notifyForBlockerEvents: NOTIFY
    deployedNotRun: MUTE
  qa:
    success: MUTE
    failure: MUTE
    notifyForBlockerEvents: MUTE


env:
  all:
    JVM_MAX_HEAP: 1024m
    MIGRATION_JOB_CLASS: com.hubspot.orion.OrionLiquibaseMigrationJob

zkGroup: mesos:deploy:hs_staging:v3
team: hs-paas-deploy

procfile:
  dbmigrate:
    type: ON_DEMAND
    cmd: java-wrapper -Djava.net.preferIPv4Stack=true -cp ./target/\* $MIGRATION_JOB_CLASS migrate
  fast-forward:
    cmd: java-wrapper -Djava.net.preferIPv4Stack=true -cp ./target/\* $MIGRATION_JOB_CLASS fast-forward --all
    type: ON_DEMAND
  dbstatus:
    type: ON_DEMAND
    cmd: java-wrapper -Djava.net.preferIPv4Stack=true -cp ./target/\* $MIGRATION_JOB_CLASS status
  dry-run:
    type: ON_DEMAND
    cmd: java-wrapper -Djava.net.preferIPv4Stack=true -cp ./target/\* $MIGRATION_JOB_CLASS migrate -n

hublets:
  - NA1
